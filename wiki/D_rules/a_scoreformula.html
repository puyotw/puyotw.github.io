<!DOCTYPE html>
<html lang="zh-Hant"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.5.0 -->
<title>障礙氣泡量公式 | 魔法氣泡中文百科</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="障礙氣泡量公式" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="本百科整合散落網路上的魔法氣泡玩法、連鎖概念、戰術等資料並中文化，務求能藉此推廣魔法氣泡到更多中文玩家，壯大魔法氣泡中文圈子。" />
<meta property="og:description" content="本百科整合散落網路上的魔法氣泡玩法、連鎖概念、戰術等資料並中文化，務求能藉此推廣魔法氣泡到更多中文玩家，壯大魔法氣泡中文圈子。" />
<link rel="canonical" href="https://puyo.tw/wiki/D_rules/a_scoreformula" />
<meta property="og:url" content="https://puyo.tw/wiki/D_rules/a_scoreformula" />
<meta property="og:site_name" content="魔法氣泡中文百科" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-02-14T12:46:49+00:00" />
<script type="application/ld+json">
{"description":"本百科整合散落網路上的魔法氣泡玩法、連鎖概念、戰術等資料並中文化，務求能藉此推廣魔法氣泡到更多中文玩家，壯大魔法氣泡中文圈子。","@type":"BlogPosting","url":"https://puyo.tw/wiki/D_rules/a_scoreformula","headline":"障礙氣泡量公式","dateModified":"2019-02-14T12:46:49+00:00","datePublished":"2019-02-14T12:46:49+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://puyo.tw/wiki/D_rules/a_scoreformula"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous"><link type="application/atom+xml" rel="alternate" href="https://puyo.tw/feed.xml" title="魔法氣泡中文百科" /></head>
<body><header class="site-header">
  <nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
    <div class="navbar-brand">
      <a class="navbar-item" rel="author" href="/">
        <img class="navbar-logo" src="https://yt3.ggpht.com/a-/AAuE7mAzF0YlAQv0YQxq35osxnWg0WGqpKzW33Aa=s288-mo-c-c0xffffffff-rj-k-no" width="30" height="30">
        <span>魔法氣泡中文百科</span>
      </a>
      <a role="button" class="navbar-burger burger" aria-label="menu"
      aria-expanded="false" data-target="navbar-items">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>
    <div id="navbar-items" class="navbar-menu">
      <div class="navbar-start"><a class="navbar-item" href="/about/">關於我們</a></div>
    </div>
  </nav>
</header>
<main class="page-content" aria-label="Content">
      <aside class="sidebar menu">
  <div class="sidebar__inner"><ul class="menu-list" data-menu-depth="0">
    <li class=""><a href="/wiki" class="">
          魔法氣泡中文百科
        </a><ul class="" data-menu-depth="1">
    <li class=""><input type="checkbox" id="
      item-1-1
    ">
        <label class="sidebar__dropdown" for="
      item-1-1
    ">
          基礎教學
          <span class="sidebar__icon icon">
            <i class="fas fa-angle-down fa-lg"></i>
          </span>
        </label></li>
    <li class=""><input type="checkbox" id="
      item-1-2
    ">
        <label class="sidebar__dropdown" for="
      item-1-2
    ">
          連鎖
          <span class="sidebar__icon icon">
            <i class="fas fa-angle-down fa-lg"></i>
          </span>
        </label><ul class="" data-menu-depth="2">
    <li class=""><input type="checkbox" id="
      item-2-1
    ">
        <label class="sidebar__dropdown" for="
      item-2-1
    ">
          概論
          <span class="sidebar__icon icon">
            <i class="fas fa-angle-down fa-lg"></i>
          </span>
        </label><ul class="" data-menu-depth="3">
    <li class=""><input type="checkbox" id="
      item-3-1
    ">
        <label class="sidebar__dropdown" for="
      item-3-1
    ">
          連鎖的構成要素
          <span class="sidebar__icon icon">
            <i class="fas fa-angle-down fa-lg"></i>
          </span>
        </label><ul class="" data-menu-depth="4">
    <li class=""><a href="/wiki/B_chain/a_overview/i_components/1_vert3" class="">
          縱3
        </a></li>
    <li class=""><a href="/wiki/B_chain/a_overview/i_components/2_hori3" class="">
          橫3
        </a></li>
    <li class=""><a href="/wiki/B_chain/a_overview/i_components/3_L" class="">
          L字
        </a></li></ul></li>
    <li class=""><input type="checkbox" id="
      item-4-2
    ">
        <label class="sidebar__dropdown" for="
      item-4-2
    ">
          土台
          <span class="sidebar__icon icon">
            <i class="fas fa-angle-down fa-lg"></i>
          </span>
        </label></li></ul></li></ul></li>
    <li class=""><a href="/wiki/C_tactics" class="">
          戰術
        </a><ul class="" data-menu-depth="5">
    <li class=""><a href="/wiki/C_tactics/b_middle" class="">
          中盤
        </a><ul class="" data-menu-depth="6">
    <li class=""><a href="/wiki/C_tactics/b_middle/i_intro" class="">
          概論
        </a></li></ul></li>
    <li class=""><a href="/wiki/C_tactics/e_observation" class="">
          凝視的技巧
        </a></li>
    <li class=""><a href="/wiki/C_tactics/ii_main_chain_and_side_chain" class="">
          主砲與副砲
        </a></li></ul></li>
    <li class=""><input type="checkbox" id="
      item-6-4
    ">
        <label class="sidebar__dropdown" for="
      item-6-4
    ">
          規則相關
          <span class="sidebar__icon icon">
            <i class="fas fa-angle-down fa-lg"></i>
          </span>
        </label><ul class="" data-menu-depth="7">
    <li class=""><a href="/wiki/D_rules/a_scoreformula" class="">
          障礙氣泡量公式
        </a></li></ul></li></ul></li></ul></div>
</aside><article class="color-theme-1 wiki__post container js-Pjax">
  <div class="markdown-section">
    <h1>障礙氣泡量公式</h1><div class="tags are-medium"></div><div class="post-content e-content" itemprop="articleBody">
  <p>在魔法氣泡的對戰中，玩家發動連鎖會給對手攻擊，也就是障礙氣泡。障礙氣泡的數量其實是由得分與加倍時間決定（得分顯示在場地的下方），而其中得分的算法，依據可消除的氣泡個數也有不同。以下，我們先討論在沒有加倍時間、可消除氣泡數量為4顆（預設可消除數量）的分數計算方法。</p>

<h2 id="分數計算基本概念">分數計算：基本概念</h2>

<p>當玩家發動一個總數為$n$的連鎖時，送給對手的障礙氣泡總數為</p>

<p>\begin{align<em>}
&amp; \text{送給對手的障礙氣泡總數} <br />
= &amp; \left\lfloor \frac{1}{70} \left( \sum_{k=1}^{n}\text{第$k$連鎖得分}S_k + \text{連鎖發動前累積的落下得分}\right)\right\rfloor
\end{align</em>}</p>

<p>其中$\lfloor \ \rfloor$是向下取整，整個公式的意思是取括號內數字除以$70$的商。這個$70$就是「障礙氣泡的換算率」，預設為$70$，在近幾個版本玩家都能在遊戲內調整換算率。</p>

<p>公式中的落下得分，其計算方式為，緩降（soft drop）時氣泡經過一格加一分。發動完$n$連鎖後，累積的這些落下得分與每次連鎖得分相加，除完$70$的商是障礙氣泡量，餘數則保存起來，待下次發動連鎖時一倂納入計算。$n$連鎖中每個連鎖的分數都是個別計算，彼此不相關，算完後加總起來。以下讓$k$固定，討論第$k$連鎖的得分$S_k$的計算方式。</p>

<h2 id="第k連鎖得分s_k">第$k$連鎖得分$S_k$</h2>

<p>$S_k$的計算方式與下列四個數字息息相關：</p>
<ul>
  <li>第$k$連鎖消除的氣泡數$t$</li>
  <li>$k$的值</li>
  <li>第$k$連鎖消除的顏色數$c$</li>
  <li>第$k$連鎖的各連結數$l_i$</li>
</ul>

<p>更精確來說，$k$、$c$、$l$後面有三個函數分別決定這些值對應到的「獎勵（bonus）」是多少，而這些獎勵與氣泡數$t$會一起決定$S_k$。</p>

<h3 id="1-氣泡數t">1. 氣泡數$t$</h3>

<p>指的是在第$k$連鎖消除的所有氣泡數，這應該不須多做解釋～</p>

<h3 id="2-k的值">2. $k$的值</h3>

<p>$k$的值與連鎖獎勵（命名為$R(k)$）的關係由下表給出：</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">$k$的值</th>
      <th style="text-align: center">連鎖獎勵$R(k)$</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">$1$</td>
      <td style="text-align: center">$0$</td>
    </tr>
    <tr>
      <td style="text-align: center">$2$</td>
      <td style="text-align: center">$8$</td>
    </tr>
    <tr>
      <td style="text-align: center">$3$</td>
      <td style="text-align: center">$16$</td>
    </tr>
    <tr>
      <td style="text-align: center">$4$</td>
      <td style="text-align: center">$32$</td>
    </tr>
    <tr>
      <td style="text-align: center">$5$</td>
      <td style="text-align: center">$64$</td>
    </tr>
    <tr>
      <td style="text-align: center">$6$</td>
      <td style="text-align: center">$96$</td>
    </tr>
    <tr>
      <td style="text-align: center">$7$</td>
      <td style="text-align: center">$128$</td>
    </tr>
    <tr>
      <td style="text-align: center">$8$</td>
      <td style="text-align: center">$160$</td>
    </tr>
    <tr>
      <td style="text-align: center">$9$</td>
      <td style="text-align: center">$192$</td>
    </tr>
    <tr>
      <td style="text-align: center">$10$</td>
      <td style="text-align: center">$224$</td>
    </tr>
    <tr>
      <td style="text-align: center">$11$</td>
      <td style="text-align: center">$256$</td>
    </tr>
    <tr>
      <td style="text-align: center">$12$</td>
      <td style="text-align: center">$288$</td>
    </tr>
    <tr>
      <td style="text-align: center">$13$</td>
      <td style="text-align: center">$320$</td>
    </tr>
    <tr>
      <td style="text-align: center">$14$</td>
      <td style="text-align: center">$352$</td>
    </tr>
    <tr>
      <td style="text-align: center">$15$</td>
      <td style="text-align: center">$384$</td>
    </tr>
    <tr>
      <td style="text-align: center">$16$</td>
      <td style="text-align: center">$416$</td>
    </tr>
    <tr>
      <td style="text-align: center">$17$</td>
      <td style="text-align: center">$448$</td>
    </tr>
    <tr>
      <td style="text-align: center">$18$</td>
      <td style="text-align: center">$480$</td>
    </tr>
    <tr>
      <td style="text-align: center">$19$</td>
      <td style="text-align: center">$512$</td>
    </tr>
  </tbody>
</table>

<p>可以發現到，第$1$連鎖沒有獎勵，<strong>$2$連鎖～$5$連鎖的獎勵倍增，而$5$連鎖以上固定是每次加$32$分</strong>。</p>

<h3 id="3-此連鎖消除的顏色數c">3. 此連鎖消除的顏色數$c$</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: center">顏色數$c$</th>
      <th style="text-align: center">色數獎勵$C(c)$</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">$1$</td>
      <td style="text-align: center">$0$</td>
    </tr>
    <tr>
      <td style="text-align: center">$2$</td>
      <td style="text-align: center">$3$</td>
    </tr>
    <tr>
      <td style="text-align: center">$3$</td>
      <td style="text-align: center">$6$</td>
    </tr>
    <tr>
      <td style="text-align: center">$4$</td>
      <td style="text-align: center">$12$</td>
    </tr>
    <tr>
      <td style="text-align: center">$5$</td>
      <td style="text-align: center">$24$</td>
    </tr>
  </tbody>
</table>

<p>同樣地，單色沒有獎勵，不過$2$色～$5$色的獎勵都是倍數成長。要注意的是，<strong>這個表跟$k$沒有關係</strong>，不因$k$的大小決定這個表的值；不論連鎖是大是小，每一次消除時都會看消了幾個顏色，只用這個來決定色數獎勵。</p>

<h3 id="4-連結數l">4. 連結數$l$</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: center">連結數$l$</th>
      <th style="text-align: center">連結獎勵$L(l)$</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">$4$</td>
      <td style="text-align: center">$0$</td>
    </tr>
    <tr>
      <td style="text-align: center">$5$</td>
      <td style="text-align: center">$2$</td>
    </tr>
    <tr>
      <td style="text-align: center">$6$</td>
      <td style="text-align: center">$3$</td>
    </tr>
    <tr>
      <td style="text-align: center">$7$</td>
      <td style="text-align: center">$4$</td>
    </tr>
    <tr>
      <td style="text-align: center">$8$</td>
      <td style="text-align: center">$5$</td>
    </tr>
    <tr>
      <td style="text-align: center">$9$</td>
      <td style="text-align: center">$6$</td>
    </tr>
    <tr>
      <td style="text-align: center">$10$</td>
      <td style="text-align: center">$7$</td>
    </tr>
    <tr>
      <td style="text-align: center">$\ge11$</td>
      <td style="text-align: center">$10$</td>
    </tr>
  </tbody>
</table>

<p>同樣地，這個表也跟$k$的大小沒關係，只用連結數多寡來決定獎勵。由於$4$顆氣泡是最低能消除的數量，這邊就定成$4$連結沒有獎勵。</p>

<p>另外，觀察一下可以發現到，連結數從$4$到$5$時獎勵$+2$，從$10$到$11$時獎勵$+3$，因此<strong>$5$連結與$11$連結是很有效率的</strong>；另一方面，<strong>$12$以上的連結則效率低落</strong>，因為他們跟$11$連結有一樣的獎勵。</p>

<p>還有一個要注意的點是，如果第$k$連鎖消掉的氣泡分成好幾個彼此內部相連的群組，那<strong>每個連結群都會計算一次連結獎勵</strong>！舉例來說，請看下面這張圖：</p>

<p><img src="https://i.imgur.com/fzHcsaz.png" alt="連結獎勵解釋" /></p>

<p>此圖消除的氣泡有綠色五連結、綠色六連結、黃色五連結、藍色四連結，所以總共的連結獎勵是$3+2+3+0=8$！</p>

<h3 id="5-s_k計算方式">5. $S_k$計算方式</h3>

<p>現在，我們可以用上面這些數字來表示第$k$連鎖得分的公式了。令第$k$連鎖消除的總氣泡數為$t$，消除了$c$個顏色。另外，假設第$k$連鎖消除的所有氣泡分成$g$個連結群，而每一群有$l_i$個氣泡，$i=, \cdots, g$（因此$\sum_{i=1}^{g}l_i=t$）。</p>

<p>則第$k$連鎖的得分$S_k$為</p>

<script type="math/tex; mode=display">% <![CDATA[
S_k=
\begin{cases}
40&, \text{若}(k,t)=(1,4) \\
10t\left( R(k)+C(c)+\sum_{i=1}^{g} L(l_i) \right)&, \text{若}(k,t)\neq(1,4)
\end{cases} %]]></script>

<p>也就是說，如果$k=1$，而且只消除四顆氣泡，那以上三種獎勵函數的值都是$0$，此情況就直接定義得分為$10t=40$分；而其他情況就照著上面的表帶值，算完總和後一樣在外面乘以$10t$。</p>

<h2 id="分數計算實例">分數計算：實例</h2>

<p>至此我們說明了$S_k$的計算方法，但是別忘記，發動一個$n$連鎖時需要計算每個$S_k$再加總起來的。我們就來使用上面的公式算些具體例子吧！回憶一下在<a href="https://puyo.tw/wiki/C_tactics/b_middle/i_intro?t=1549988251767">中盤概論</a>提到的概念，</p>

<blockquote>
  <p>「<em>在消掉的氣泡數一樣的前提下，追求高同消與追求高連鎖的分數可能差不多，甚至更多。</em>」──魔法氣泡中文百科</p>
</blockquote>

<p>話說得很含糊，甚麼叫差不多，更多又是怎麼個多法？有了得分計算公式，我們可以精確地說明了。以5A5B的情況為例，不考慮落下得分，則兩連鎖與一連鎖同消的得分如下：</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center"> </th>
      <th style="text-align: center">圖1</th>
      <th style="text-align: center">圖2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: center"><img src="https://i.imgur.com/IAGhqMu.png" alt="兩連鎖600分" /></td>
      <td style="text-align: center"><img src="https://i.imgur.com/MKf9XNQ.png" alt="一連鎖700分" /></td>
    </tr>
    <tr>
      <td style="text-align: center">第1連鎖</td>
      <td style="text-align: center">$10 \times 5 \times 2 = 100$</td>
      <td style="text-align: center">10 \times 10 \times (3+2+2)=700</td>
    </tr>
    <tr>
      <td style="text-align: center">第2連鎖</td>
      <td style="text-align: center">$10 \times 5 \times (8+2)=500$</td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center">總分</td>
      <td style="text-align: center">$600$</td>
      <td style="text-align: center">$700$</td>
    </tr>
  </tbody>
</table>

<p>確實是一連鎖同消的得分更高！再比較一下三連鎖與二連雙消，</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center"> </th>
      <th style="text-align: center">圖3</th>
      <th style="text-align: center">圖4</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"> </td>
      <td style="text-align: center"><img src="https://i.imgur.com/dR6oLJZ.png" alt="三連鎖1000分" /></td>
      <td style="text-align: center"><img src="https://i.imgur.com/uMYZegu.png" alt="一連鎖700分" /></td>
    </tr>
    <tr>
      <td style="text-align: center">第1連鎖</td>
      <td style="text-align: center">$40$</td>
      <td style="text-align: center">$40$</td>
    </tr>
    <tr>
      <td style="text-align: center">第2連鎖</td>
      <td style="text-align: center">$10 \times 4 \times 8 = 320$</td>
      <td style="text-align: center">$10 \times 8 \times (8+3+0+0)=880$</td>
    </tr>
    <tr>
      <td style="text-align: center">第3連鎖</td>
      <td style="text-align: center">$10 \times 4 \times 16 = 640$</td>
      <td style="text-align: center"> </td>
    </tr>
    <tr>
      <td style="text-align: center">總分</td>
      <td style="text-align: center">$1000$</td>
      <td style="text-align: center">$920$</td>
    </tr>
  </tbody>
</table>

<p>在此情況，二連雙消只少了$1$～$2$顆氣泡，但能給對手更短的反應時間。</p>

<p>最後再舉一個例子。注意到，圖1與圖2告訴我們一個全消戰的較佳策略：如果開場前五手剛好來了5A5B，用圖2的方式不但更快取得全消，而且分數也高，對全消戰很有利。</p>

<p>那麼，如果開場前四手是4A4B呢？此時應該擺成兩連鎖還是一連鎖同消，哪個比較有利？</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">兩連鎖</th>
      <th style="text-align: center">一連鎖同消</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center"><img src="https://i.imgur.com/F9G3rcC.png" alt="兩連鎖360分" /></td>
      <td style="text-align: center"><img src="https://i.imgur.com/muuD101.png" alt="一連鎖240分" /></td>
    </tr>
  </tbody>
</table>

<p>讀者可以自行計算作為練習，結果是：左圖$360$分、右圖$240$分。在4A4B的情況下，兩連鎖雖然會較慢取得全消，但此時攻擊力較高，通常都還是做兩連鎖，而非一連鎖同消。</p>

<h2 id="非預設規則的障礙氣泡-加倍時間下的障礙氣泡">非預設規則的障礙氣泡## 加倍時間下的障礙氣泡</h2>

<p><a href="https://www.youtube.com/watch?v=hH0j24Rfwcg">2個消し39連鎖</a>.
(https://puyonexus.com/wiki/List_of_attack_powers).
<a href="http://www.inosendo.com/puyo/margintime.html">ぷよぷよフィーバーにおけるマージンタイム到達後のおじゃまぷよレートの変動調査</a>.</p>

</div>

  </div>
</article>
<script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async></script>
<script>
  (function() { 
    var pjax = new Pjax({
      selectors: ["title", ".js-Pjax"],
      switches: {
        ".js-Pjax": Pjax.switches.outerHTML
      }
    });
    function ReloadMath() {
      MathJax.Hub.Queue(["Typeset",MathJax.Hub]);
    }
    document.addEventListener("pjax:success", ReloadMath);
  })();
</script>

    </main><footer class="footer">
  <div class="content has-text-centered">
    <p>本百科整合散落網路上的魔法氣泡玩法、連鎖概念、戰術等資料並中文化，務求能藉此推廣魔法氣泡到更多中文玩家，壯大魔法氣泡中文圈子。</p>
  </div>
</footer>
</body>

</html>
